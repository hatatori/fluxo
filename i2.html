<link rel="stylesheet" type="text/css" href="style.css">

<style>
	*{
		transition: 0.5s;
	}
	body{
		text-align: center;
		font-family: ubuntu;
	}

	.invisible{display: none}

	img{width: 50}

	#cont2 div{padding: 100 0}
</style>


<!-- <link href="https://unpkg.com/treeflex/dist/css/treeflex.css" rel="stylesheet"> -->


<div class='invisible' id="cont" >Código
	Sujeitos
		Ativos
		Reserva
	Não Sujeitos
		Cargos públicos não militares ou Eletivos
		Magistrados
		Reformados


	Grau hierárquico
		Graduação
			Praças
		Posto
			Oficiais


Antiguidade
	Data
	Prevalência
	Classificação
	Nomeação ou admissão
	Maior idade


Deotologia
	PM
		Preservação da ordem pública e a garantia dos poderes constituídos
	BM
		Proteção da pessoa visando sua incolumidade em situações de risco, infortúnio ou de calamidade


Valores éticos
	HC3
		Hierarquia
		Honra
		Honesti..
		Civismo
		Coragem
		Constância
	DP2
		Disciplina
		Digni..
		Patriot..
		Prifisiona..
	VL
		Verdade
		Lealdade


Sanções
	PRAPRECD
	Permanência
	Repreensão
	Advertência
	Proibição A/U
	Reforma
	Expulsão
	Custódia
	Demissão


Advertência
	Aplicada verbalmente
			Sem constar de publicação
			Registro de informações
				Oficiais
				Nota corretiva das praças
		Natureza
			Leve


Repreensão
	Escrito
	Publicada em boletim
	Assentamentos individuais
	Natureza
		Leve
		Média


Permanência
	Ficará na OPM ou OBM
		Sem estar circunscrito
		1
			2
			3
				4
				5</div>




<div id="cont2"></div>

<br><br>
<div class="tf-tree example" id="ok"></div>

<script>


	
	function go(linha){

		function tab(n){ try { return n.split("\t").length-1}catch(e){return 0} }

		// linha = txt.value.split("\n")
		linha = linha.split("\n")
		// linha.shift()

		

		// ordem = txt.value.split("\n").map(e=>e.split(/\t/g).length-1)

		ar = linha.map(e=>"<li>"+e.replace(/\t/g,"")+"</li>")

		lista = []
		s = 0


		u2 = document.createElement("ul")

		for(i=0;i<linha.length;i++){
			nome = linha[i].replace(/\t/g,"")
			lista.push(nome)
		}

		for(i=0;i<lista.length;i++){
			if(tab(linha[i+1]) > tab(linha[i])){
				lista[i] = "<li class='pos' p="+tab(linha[i])+"><span class='tf-nc'>"+lista[i]+"</span><ul pos='"+tab(linha[i+1])+"'></ul></li>"
			}else{
				lista[i] = "<li class='val' p="+tab(linha[i])+"><span class='tf-nc'>"+lista[i]+"</span></li>"
			}


		}

		u2 = document.createElement("ul")
		u2.innerHTML = lista.join("")

		po = u2.querySelectorAll(".pos")

		for(i=0;i<u2.childElementCount*7;i++){

			try{
				proximo = u2.children[s].nextSibling

				if(proximo.className != 'pos'){
					u2.children[s].querySelector('ul').appendChild(proximo)
				}else{
					s++
				}

			}catch(e){}
		}

		for(j=0;j<3;j++){
			for(i=u2.childElementCount-1;i>0;i--){
				try{

					// p1 = parseInt(u2.children[i].getAttribute("p"))
					// p2 = parseInt(u2.children[i-1].getAttribute("p"))

					p1 = tab(linha[i])
					p2 = tab(linha[i-1])

					if( p1 > p2 ){
						// u2.children[u2.children.length-2].querySelector('ul').appendChild(u2.children[u2.children.length-1])
						
						u2.children[u2.children.length-2].querySelector('ul').appendChild(u2.children[u2.children.length-1])
						// u2.children[i-1].querySelectorAll("ul").lastElementChild.appendChild(u2.children[i])
					}
				}catch(e){}
			}
		}



	try{
		po[po.length-1].querySelector("ul").appendChild(u2.lastElementChild)
	}catch(e){
	}
	try{
		po[po.length-1].querySelector("ul").appendChild(u2.lastElementChild)
	}catch(e){
	}

	// verifica posição tab
	ql = u2.querySelectorAll("li")
	
	for(z=0;z<3;z++){
		
		for(i=0;i<ql.length;i++){
			
			cima = ql[i].parentElement
			pup = parseInt(ql[i].parentElement.getAttribute("pos"))
			patual = parseInt(ql[i].getAttribute("p"))

			if(patual < pup){
				// console.log(ql[i].parentElement)
				// console.log(ql[i])
				// console.log("ok")

				ql[i].parentElement.parentElement.appendChild(ql[i])
				console.log('ok')
				// ql[i].parentElement.parentElement.appendChild(ql[i])
			}
		}
	}
	

	// ultimo = u2.children[u2.childElementCount-1]
	// if(ultimo.className == 'val'){
	// 	po[po.length-1].querySelector("ul").appendChild(ultimo)
	// }

	// ok.innerHTML = u2.outerHTML

	return u2.outerHTML;

	
}

// go()


	// div = document.createElement("div")
	// div.className = "tf-tree example"
	// div.appendChild(u2)
	// document.body.appendChild(div)

	d1 = cont.innerHTML.split("\n\n\n")

	for(i of d1){
		cont2.innerHTML += "<div class='tf-tree example'>"+go(i)+"</div>"
		// console.log(go(i))
	}
	
</script>